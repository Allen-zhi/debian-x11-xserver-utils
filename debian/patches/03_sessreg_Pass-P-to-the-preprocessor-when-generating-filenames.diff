From a5103b826dbd601c9245ceff43a006d65da21199 Mon Sep 17 00:00:00 2001
From: Stefan Dirsch <sndirsch@suse.de>
Date: Wed, 9 Sep 2015 23:44:06 +0200
Subject: [PATCH sessreg] Pass -P to the preprocessor when generating filenames for the
 manpage.

Fixes build with GCC 5. Patch by Richard Biener <rguenther@suse.com>

Signed-off-by: Julien Cristau <jcristau@debian.org>
---
 sessreg/man/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/sessreg/man/Makefile.am b/sessreg/man/Makefile.am
index 665ace5..2e5f146 100644
--- a/sessreg/man/Makefile.am
+++ b/sessreg/man/Makefile.am
@@ -9,7 +9,7 @@ SUFFIXES = .$(APP_MAN_SUFFIX) .man
 
 AM_CPPFLAGS = -I$(top_builddir) -I$(top_srcdir)
 filenames.sed: filenames.sed.c
-	$(AM_V_GEN)$(CPP) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
+	$(AM_V_GEN)$(CPP) -P $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	    $(AM_CPPFLAGS) $(CPPFLAGS) $(srcdir)/filenames.sed.c | \
 	    $(SED) -n -e '/s|__/ p' -e '/^\/__/ p' > $@
 
-- 
2.5.1

